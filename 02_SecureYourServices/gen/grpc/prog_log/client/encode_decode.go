// Code generated by goa v3.8.4, DO NOT EDIT.
//
// ProgLog gRPC client encoders and decoders
//
// Command:
// $ goa gen proglog/design

package client

import (
	"context"
	prog_logpb "proglog/gen/grpc/prog_log/pb"
	proglog "proglog/gen/prog_log"
	proglogviews "proglog/gen/prog_log/views"

	goagrpc "goa.design/goa/v3/grpc"
	"google.golang.org/grpc"
	"google.golang.org/grpc/metadata"
)

// BuildProduceFunc builds the remote method to invoke for "ProgLog" service
// "Produce" endpoint.
func BuildProduceFunc(grpccli prog_logpb.ProgLogClient, cliopts ...grpc.CallOption) goagrpc.RemoteFunc {
	return func(ctx context.Context, reqpb interface{}, opts ...grpc.CallOption) (interface{}, error) {
		for _, opt := range cliopts {
			opts = append(opts, opt)
		}
		if reqpb != nil {
			return grpccli.Produce(ctx, reqpb.(*prog_logpb.ProduceRequest), opts...)
		}
		return grpccli.Produce(ctx, &prog_logpb.ProduceRequest{}, opts...)
	}
}

// EncodeProduceRequest encodes requests sent to ProgLog Produce endpoint.
func EncodeProduceRequest(ctx context.Context, v interface{}, md *metadata.MD) (interface{}, error) {
	payload, ok := v.(*proglog.ProduceRequest)
	if !ok {
		return nil, goagrpc.ErrInvalidType("ProgLog", "Produce", "*proglog.ProduceRequest", v)
	}
	return NewProtoProduceRequest(payload), nil
}

// DecodeProduceResponse decodes responses from the ProgLog Produce endpoint.
func DecodeProduceResponse(ctx context.Context, v interface{}, hdr, trlr metadata.MD) (interface{}, error) {
	var view string
	{
		if vals := hdr.Get("goa-view"); len(vals) > 0 {
			view = vals[0]
		}
	}
	message, ok := v.(*prog_logpb.ProduceResponse)
	if !ok {
		return nil, goagrpc.ErrInvalidType("ProgLog", "Produce", "*prog_logpb.ProduceResponse", v)
	}
	res := NewProduceResult(message)
	vres := &proglogviews.Produceresponse{Projected: res, View: view}
	if err := proglogviews.ValidateProduceresponse(vres); err != nil {
		return nil, err
	}
	return proglog.NewProduceresponse(vres), nil
}

// BuildConsumeFunc builds the remote method to invoke for "ProgLog" service
// "Consume" endpoint.
func BuildConsumeFunc(grpccli prog_logpb.ProgLogClient, cliopts ...grpc.CallOption) goagrpc.RemoteFunc {
	return func(ctx context.Context, reqpb interface{}, opts ...grpc.CallOption) (interface{}, error) {
		for _, opt := range cliopts {
			opts = append(opts, opt)
		}
		if reqpb != nil {
			return grpccli.Consume(ctx, reqpb.(*prog_logpb.ConsumeRequest), opts...)
		}
		return grpccli.Consume(ctx, &prog_logpb.ConsumeRequest{}, opts...)
	}
}

// EncodeConsumeRequest encodes requests sent to ProgLog Consume endpoint.
func EncodeConsumeRequest(ctx context.Context, v interface{}, md *metadata.MD) (interface{}, error) {
	payload, ok := v.(*proglog.ConsumeRequest)
	if !ok {
		return nil, goagrpc.ErrInvalidType("ProgLog", "Consume", "*proglog.ConsumeRequest", v)
	}
	return NewProtoConsumeRequest(payload), nil
}

// DecodeConsumeResponse decodes responses from the ProgLog Consume endpoint.
func DecodeConsumeResponse(ctx context.Context, v interface{}, hdr, trlr metadata.MD) (interface{}, error) {
	var view string
	{
		if vals := hdr.Get("goa-view"); len(vals) > 0 {
			view = vals[0]
		}
	}
	message, ok := v.(*prog_logpb.ConsumeResponse)
	if !ok {
		return nil, goagrpc.ErrInvalidType("ProgLog", "Consume", "*prog_logpb.ConsumeResponse", v)
	}
	res := NewConsumeResult(message)
	vres := &proglogviews.Consumeresponse{Projected: res, View: view}
	if err := proglogviews.ValidateConsumeresponse(vres); err != nil {
		return nil, err
	}
	return proglog.NewConsumeresponse(vres), nil
}

// BuildProduceStreamFunc builds the remote method to invoke for "ProgLog"
// service "ProduceStream" endpoint.
func BuildProduceStreamFunc(grpccli prog_logpb.ProgLogClient, cliopts ...grpc.CallOption) goagrpc.RemoteFunc {
	return func(ctx context.Context, reqpb interface{}, opts ...grpc.CallOption) (interface{}, error) {
		for _, opt := range cliopts {
			opts = append(opts, opt)
		}
		if reqpb != nil {
			return grpccli.ProduceStream(ctx, opts...)
		}
		return grpccli.ProduceStream(ctx, opts...)
	}
}

// DecodeProduceStreamResponse decodes responses from the ProgLog ProduceStream
// endpoint.
func DecodeProduceStreamResponse(ctx context.Context, v interface{}, hdr, trlr metadata.MD) (interface{}, error) {
	var view string
	{
		if vals := hdr.Get("goa-view"); len(vals) > 0 {
			view = vals[0]
		}
	}
	return &ProduceStreamClientStream{
		stream: v.(prog_logpb.ProgLog_ProduceStreamClient),
		view:   view,
	}, nil
}

// BuildConsumeStreamFunc builds the remote method to invoke for "ProgLog"
// service "ConsumeStream" endpoint.
func BuildConsumeStreamFunc(grpccli prog_logpb.ProgLogClient, cliopts ...grpc.CallOption) goagrpc.RemoteFunc {
	return func(ctx context.Context, reqpb interface{}, opts ...grpc.CallOption) (interface{}, error) {
		for _, opt := range cliopts {
			opts = append(opts, opt)
		}
		if reqpb != nil {
			return grpccli.ConsumeStream(ctx, reqpb.(*prog_logpb.ConsumeStreamRequest), opts...)
		}
		return grpccli.ConsumeStream(ctx, &prog_logpb.ConsumeStreamRequest{}, opts...)
	}
}

// EncodeConsumeStreamRequest encodes requests sent to ProgLog ConsumeStream
// endpoint.
func EncodeConsumeStreamRequest(ctx context.Context, v interface{}, md *metadata.MD) (interface{}, error) {
	payload, ok := v.(*proglog.ConsumeRequest)
	if !ok {
		return nil, goagrpc.ErrInvalidType("ProgLog", "ConsumeStream", "*proglog.ConsumeRequest", v)
	}
	return NewProtoConsumeStreamRequest(payload), nil
}

// DecodeConsumeStreamResponse decodes responses from the ProgLog ConsumeStream
// endpoint.
func DecodeConsumeStreamResponse(ctx context.Context, v interface{}, hdr, trlr metadata.MD) (interface{}, error) {
	var view string
	{
		if vals := hdr.Get("goa-view"); len(vals) > 0 {
			view = vals[0]
		}
	}
	return &ConsumeStreamClientStream{
		stream: v.(prog_logpb.ProgLog_ConsumeStreamClient),
		view:   view,
	}, nil
}
