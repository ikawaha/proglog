// Code generated by goa v3.8.4, DO NOT EDIT.
//
// ProgLog gRPC server encoders and decoders
//
// Command:
// $ goa gen github.com/ikawaha/proglog/design

package server

import (
	"context"

	prog_logpb "github.com/ikawaha/proglog/gen/grpc/prog_log/pb"
	proglog "github.com/ikawaha/proglog/gen/prog_log"
	proglogviews "github.com/ikawaha/proglog/gen/prog_log/views"
	goagrpc "goa.design/goa/v3/grpc"
	"google.golang.org/grpc/metadata"
)

// EncodeProcedureResponse encodes responses from the "ProgLog" service
// "Procedure" endpoint.
func EncodeProcedureResponse(ctx context.Context, v interface{}, hdr, trlr *metadata.MD) (interface{}, error) {
	vres, ok := v.(*proglogviews.Produceresponse)
	if !ok {
		return nil, goagrpc.ErrInvalidType("ProgLog", "Procedure", "*proglogviews.Produceresponse", v)
	}
	result := vres.Projected
	(*hdr).Append("goa-view", vres.View)
	resp := NewProtoProcedureResponse(result)
	return resp, nil
}

// DecodeProcedureRequest decodes requests sent to "ProgLog" service
// "Procedure" endpoint.
func DecodeProcedureRequest(ctx context.Context, v interface{}, md metadata.MD) (interface{}, error) {
	var (
		message *prog_logpb.ProcedureRequest
		ok      bool
	)
	{
		if message, ok = v.(*prog_logpb.ProcedureRequest); !ok {
			return nil, goagrpc.ErrInvalidType("ProgLog", "Procedure", "*prog_logpb.ProcedureRequest", v)
		}
		if err := ValidateProcedureRequest(message); err != nil {
			return nil, err
		}
	}
	var payload *proglog.ProduceRequest
	{
		payload = NewProcedurePayload(message)
	}
	return payload, nil
}

// EncodeConsumeResponse encodes responses from the "ProgLog" service "Consume"
// endpoint.
func EncodeConsumeResponse(ctx context.Context, v interface{}, hdr, trlr *metadata.MD) (interface{}, error) {
	vres, ok := v.(*proglogviews.Consumeresponse)
	if !ok {
		return nil, goagrpc.ErrInvalidType("ProgLog", "Consume", "*proglogviews.Consumeresponse", v)
	}
	result := vres.Projected
	(*hdr).Append("goa-view", vres.View)
	resp := NewProtoConsumeResponse(result)
	return resp, nil
}

// DecodeConsumeRequest decodes requests sent to "ProgLog" service "Consume"
// endpoint.
func DecodeConsumeRequest(ctx context.Context, v interface{}, md metadata.MD) (interface{}, error) {
	var (
		message *prog_logpb.ConsumeRequest
		ok      bool
	)
	{
		if message, ok = v.(*prog_logpb.ConsumeRequest); !ok {
			return nil, goagrpc.ErrInvalidType("ProgLog", "Consume", "*prog_logpb.ConsumeRequest", v)
		}
	}
	var payload *proglog.ConsumeRequest
	{
		payload = NewConsumePayload(message)
	}
	return payload, nil
}

// EncodeProcedureStreamResponse encodes responses from the "ProgLog" service
// "ProcedureStream" endpoint.
func EncodeProcedureStreamResponse(ctx context.Context, v interface{}, hdr, trlr *metadata.MD) (interface{}, error) {
	vres, ok := v.(*proglogviews.Produceresponse)
	if !ok {
		return nil, goagrpc.ErrInvalidType("ProgLog", "ProcedureStream", "*proglogviews.Produceresponse", v)
	}
	result := vres.Projected
	(*hdr).Append("goa-view", vres.View)
	resp := NewProtoProcedureStreamResponse(result)
	return resp, nil
}

// EncodeConsumeStreamResponse encodes responses from the "ProgLog" service
// "ConsumeStream" endpoint.
func EncodeConsumeStreamResponse(ctx context.Context, v interface{}, hdr, trlr *metadata.MD) (interface{}, error) {
	vres, ok := v.(*proglogviews.Consumeresponse)
	if !ok {
		return nil, goagrpc.ErrInvalidType("ProgLog", "ConsumeStream", "*proglogviews.Consumeresponse", v)
	}
	result := vres.Projected
	(*hdr).Append("goa-view", vres.View)
	resp := NewProtoConsumeStreamResponse(result)
	return resp, nil
}
